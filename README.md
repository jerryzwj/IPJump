Cloudflare Workers 双协议智能跳转工具
一款轻量级、高性能的边缘跳转工具，基于访问者 IP 协议类型（IPv4/IPv6）智能分流域名请求。适合家庭仅有IPV6公网没有IPV4公网进行分流，没有公网IPV6的访问者自动跳转到设置的内网穿透地址，有则自动使用公网访问IPV6地址。
部署于 Cloudflare Workers 边缘节点，实现无服务器、低延迟的域名流量分发，零运维成本即可上线使用。
✨ 核心特性
🎯 协议精准识别
依托 Cloudflare 原生请求头 CF-Connecting-IP，自动判定访问者 IP 协议类型（IPv4/IPv6）。
优化判定逻辑，排除端口冒号干扰，确保协议识别准确率 100%。
⚙️ 灵活域名配置
支持为每个域名独立配置 IPv4/IPv6 跳转目标，兼容带端口的完整 URL（如 http://192.168.0.107:3003）。
可自定义重定向状态码（301 永久跳转 / 302 临时跳转），满足不同业务场景需求。
🔗 路径参数保留
跳转时自动继承原请求的访问路径（如 /article/123）和 URL 参数（如 ?uid=456），保障业务链路完整性。
一键开关：注释对应代码行即可关闭路径参数保留功能。
🛡️ 完善异常处理
全覆盖异常场景：未配置域名、目标 URL 格式错误、运行时异常等。
返回中文友好错误提示 + 标准 HTTP 状态码，问题排查更高效。
🚀 边缘原生高性能
基于 Cloudflare 全球边缘网络运行，毫秒级响应，全球访问低延迟。
无服务器部署：无需购置服务器、无需运维，个人用户可享免费额度。
🎯 适用场景
🌐 双栈网络分流：将同一域名的 IPv4/IPv6 访问请求，分别路由至不同后端服务节点。
🖥️ 多端口服务映射：以单域名为统一入口，按协议分发流量至不同端口的应用服务。
🌍 跨境 / 区域优化：根据 IP 协议类型，定向跳转至对应区域的服务节点，提升访问体验。
🔧 个人域名管理：通过极简配置，实现多个域名的差异化跳转策略。
🚀 快速部署
登录 Cloudflare 账户，进入 Workers & Pages 模块。
创建新的 Workers 服务，将仓库中的脚本替换默认代码。
修改脚本中的 DOMAIN_CONFIG 配置项，填入需要跳转的域名及对应 IPv4/IPv6 目标地址。
配置域名 DNS 解析，将域名指向 Cloudflare（开启橙色云朵图标），并绑定至该 Workers 服务。
访问配置的域名，即可触发基于 IP 协议的智能跳转。
📄 开源协议
本项目基于 MIT 协议开源，你可以自由使用、修改和分发本项目代码。
